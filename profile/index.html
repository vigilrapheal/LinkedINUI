<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125314689-2"></script> -->
    <!-- <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-125314689-2');
    </script> -->

    <!--
		Basic
	-->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>LinkedIN</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="vCard & Resume Template" />
    <meta name="keywords" content="vcard, resposnive, resume, personal, card, cv, cards, portfolio" />
    <meta name="author" content="beshleyua" />

    </style>
    <!-- <link type="text/css" rel="stylesheet" href="./Ryan - vCard _ Resume _ CV Template_files/css"> -->

    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> -->

    <!-- <style type="text/css">
        .gm-ui-hover-effect {
            opacity: .6
        }

        .gm-ui-hover-effect:hover {
            opacity: 1
        }
    </style>
    <style type="text/css">
        .gm-style .gm-style-cc span,
        .gm-style .gm-style-cc a,
        .gm-style .gm-style-mtc div {
            font-size: 10px;
            box-sizing: border-box
        }
    </style>
    <style type="text/css">
        @media print {

            .gm-style .gmnoprint,
            .gmnoprint {
                display: none
            }
        }

        @media screen {

            .gm-style .gmnoscreen,
            .gmnoscreen {
                display: none
            }
        }
    </style> -->
    <style type="text/css">
        /* .gm-style-pbc {
            transition: opacity ease-in-out;
            background-color: rgba(0, 0, 0, 0.45);
            text-align: center
        }

        .gm-style-pbt {
            font-size: 22px;
            color: white;
            font-family: Roboto, Arial, sans-serif;
            position: relative;
            margin: 0;
            top: 50%;
            -webkit-transform: translateY(-50%);
            -ms-transform: translateY(-50%);
            transform: translateY(-50%)
        } */

        .tableFixHead {
            overflow-y: auto;
            height: 850px;
        }

        .tableFixHead th {
            position: sticky;
            top: 0;
        }

        body {
            background: white;
        }

        /* Just common table stuff. Really. */
        table {
            border-collapse: collapse;
            width: 100%;
            background: rgba(236, 245, 227, 0.8);
            color: black;
        }

        th,
        td {
            padding: 8px 16px;
        }

        th {
            background: #eee;
        }

        .tableContainer {
            transform: translateX(0);
        }
    </style>

    <!--
		Load Fonts
    -->
    <!-- <link href="./Ryan - vCard _ Resume _ CV Template_files/css(1)" rel="stylesheet"> -->
    <!-- <link
        href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet"> -->
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css"
        integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">
    <link rel="stylesheet" href="./Ryan - vCard _ Resume _ CV Template_files/styles.min.css" />
    <link rel="stylesheet" href="./Ryan - vCard _ Resume _ CV Template_files/template-colors/green.css" /> -->
    <!--[if lt IE 9]>
	<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

    <!--
		Favicons
	-->
    <!-- <link rel="shortcut icon" href="images/favicons/favicon.ico"> -->

    <style>
        td a:hover {
            color: red;
        }
    </style>

</head>

<body>

    <br><br>
    <div class="tableFixHead">
        <table class="table table-fixed" border="1">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Title</th>
                    <th style="width: 1000px">Experience</th>
                    <th style="width: 1000px">Education</th>
                    <th>Location</th>
                    <th>Profile Url</th>
                    <th>Skills</th>
                    <th>Industry</th>
                    <th>Summary</th>
                    <th>View Profile</th>
                </tr>
            </thead>
            <tbody>
                <!-- <tr>
                                    <td>1</td>
                                    <td rowspan="2">Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                </tr>
                                <tr>
                                    <td>1</td>
        
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>1</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                    <td>Mike Adams</td>
                                    <td>23</td>
                                </tr> -->
            </tbody>
        </table>
    </div>


    <!--
		jQuery Scripts
	-->
    <!-- <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDz2w7HUaWudHwd7AWQpCL48Qs050WOn9s"></script> -->
    <script src="./Ryan - vCard _ Resume _ CV Template_files/scripts.min.js"></script>

    <script>
        var totalCounter = 1;
        $(document).ready(function () {

            // jQuery(function ($) {
            //     $('.tableFixHead').on('scroll', function () {
            //         if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
            //             alert('end reached');
            //         }
            //     })
            // });

            localStorage.setItem("pageNumber", 0);

            var intervalID;
            $.get("http://35.192.233.38:8009/getLinkedinDetails?page=" + localStorage.getItem("pageNumber") + "&size=30", function (data) {
                // console.log(data);
                displayContent(data);
            });
            // intervalID = setInterval(function () {

            //     $.get("http://35.192.233.38:8009/getLinkedinDetails?page=" + localStorage.getItem("pageNumber") + "&size=100", function (data) {
            //         // console.log(data);
            //         if (data.number === data.totalPages) {
            //             setTimeout(function () {
            //                 clearInterval(intervalID);
            //             });
            //         }
            //         displayContent(data);
            //     })
            // }, 3000);
            jQuery(function ($) {
                $('.tableFixHead').on('scroll', function () {

                    // console.log("scroll top"+$(this).scrollTop());
                    // console.log("inner html"+$(this).innerHeight());
                    // console.log("scroll height"+$(this)[0].scrollHeight);

                    if (($(this).scrollTop()) + $(this).innerHeight() >= $(this)[0].scrollHeight) {
                        if (localStorage.getItem("pageNumber") === localStorage.getItem("totalPages")) {
                            alert("nothing more to display");
                        } else {
                            $.get("http://35.192.233.38:8009/getLinkedinDetails?page=" + localStorage.getItem("pageNumber") + "&size=30", function (data) {
                                // console.log(data);
                                displayContent(data);
                            })
                        }
                    }
                })
            });


        });

        function displayContent(data) {
            var trContent = "<tr>";

            "<td>1</td><td rowspan=\"2\">Mike Adams</td>"
                + "<td>23</td><td>1</td><td>Mike Adams</td><td>23</td><td>1</td>"
                + "<td>Mike Adams</td><td>23</td><td>23</td><td>Mike Adams</td>"
                + "<td>23</td><td>Mike Adams</td><td>23</td></tr>"

            var contentArray = data.content;

            $.each(contentArray, function (key, value) {
                var trContent = "<tr>";
                // console.log(key);
                var firstTake = true;
                var experinceObject = JSON.parse(value.experience);
                var arrayList = experinceObject.myArrayList;
                trContent += "<td>" + (totalCounter++) + "</td>";//slno
                // if (firstTake === "true" || firstTake || firstTake === true)
                //     trContent += "<td rowspan=\"" + arrayList.length + "\">" + value.name + "</td>";//name

                trContent += "<td>" + value.name + "</td>";//name

                trContent += "<td>" + value.position + "</td>";

                // trContent+="<td>"+value.name+"</td>";

                //experience

                // var allJobTitle = "";
                // var allCompany = "";
                // var allexperience = "";

                var allInOneExperience = "";

                $.each(arrayList, function (expKey, expValue) {
                    if (firstTake === "true" || firstTake || firstTake === true)
                        firstTake = false;
                    var expContent = expValue.map;

                    allInOneExperience += "<b>" + (expKey + 1) + ") " + expContent.jobTitle + "</b> | " + expContent.company + " | " + expContent.experience + "<br><br>";



                    // allJobTitle += (expKey + 1) + ") " + expContent.jobTitle + "\n\n";

                    // allCompany += expContent.company + "\n\n";

                    // allexperience += expContent.experience + "\n\n";

                    // trContent += "<td>" + expContent.jobTitle + "</td>";//jobTitle
                    // trContent += "<td>" + expContent.company + "</td>";//company
                    // trContent += "<td>" + expContent.experience + "</td>";//duration
                });

                trContent += "<td>" + allInOneExperience.trim() + "</td>";//jobTitle

                // trContent += "<td>" + allCompany.trim() + "</td>";//Company

                // trContent += "<td>" + allexperience.trim() + "</td>";//duration

                var educationObject = JSON.parse(value.education);

                arrayList = educationObject.myArrayList;

                var allUniversities = "";
                var allDegrees = "";
                var allyears = "";

                var allinOneEducation = "";

                //education
                $.each(arrayList, function (eduKey, eduValue) {
                    if (firstTake === "true" || firstTake || firstTake === true)
                        firstTake = false;
                    var eduContent = eduValue.map;

                    allinOneEducation += "<b>" + (eduKey + 1) + ") " + eduContent.university + "</b> | " + eduContent.degree + " | " + eduContent.year + "<br><br>";

                    // allUniversities += (eduKey + 1) + ") " + eduContent.university + "\n\n";

                    // allDegrees += (eduKey + 1) + ") " + eduContent.degree + "\n\n";

                    // allyears += (eduKey + 1) + ") " + eduContent.year + "\n\n";

                    // trContent += "<td>" + eduContent.university + "</td>";//university
                    // trContent += "<td>" + eduContent.degree + "</td>";//degree
                    // trContent += "<td>" + eduContent.year + "</td>";//year
                });

                trContent += "<td>" + allinOneEducation.trim() + "</td>"

                // trContent += "<td>" + allUniversities.trim() + "</td>";//university

                // trContent += "<td>" + allDegrees.trim() + "</td>";//degree

                // trContent += "<td>" + allyears.trim() + "</td>";//years

                trContent += "<td>" + value.location + "</td>";//location

                trContent += "<td>" + value.profileUrl + "</td>";

                trContent += "<td>" + value.skills + "</td>";

                trContent += "<td>" + value.industry + "</td>";

                trContent += "<td>" + value.summary + "</td>";

                var stringifiedMessage = JSON.stringify(value);

                var message = btoa(unescape(encodeURIComponent(stringifiedMessage)))

                trContent += "<td><a href=\"\profile.html?profile=" + message + "\" target=\"_blank\">See More</a></td>"

                // console.log(trContent);

                trContent += "</tr>";
                $('tbody').append(trContent);
                trContent = "";
                localStorage.setItem("pageNumber", ((data.number) + 1));
                localStorage.setItem("totalPages", data.totalPages);
            });
        }


    </script>

</body>

</html>